var rowEl,quoteEl,authorEl,quoteElValue,authorElValue,list=document.getElementById("list"),addBtn=document.getElementById("addBtn"),orderListBy=document.querySelectorAll("[data-order-by]"),statusModalBtn=document.getElementById("statusModalBtn"),statusModalAlert=document.getElementById("statusModalAlert"),orderBy="quote",ascOrDesc="ASC";addBtn.addEventListener("click",add,!1),list.addEventListener("click",listBtnFunction,!1);for(var i=0;i<orderListBy.length;i++)orderListBy[i].addEventListener("click",orderList,!1);function init(){updateList()}function showStatusModal(t,e){statusModalAlert.innerHTML=t,statusModalAlert.setAttribute("class",e),statusModalBtn.click()}function updateList(){console.log("list updating..."),xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(list.innerHTML=this.responseText,$('[data-toggle="tooltip"]').tooltip())},xhttp.open("GET","handler.php?action=updateList&orderBy="+orderBy+"&ascOrDesc="+ascOrDesc,!0),xhttp.send()}function add(){console.log("adding...");var t=quoteInput.value,e=authorInput.value;xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&("emptyFields"==this.responseText?showStatusModal("one ore more fields are empty!","alert alert-danger"):"alreadyExist"==this.responseText?showStatusModal("Already Exist","alert alert-warning"):"queryError"==this.responseText?showStatusModal("Query Error!","alert alert-danger"):(list.innerHTML=this.responseText,quoteInput.value=authorInput.value="",showStatusModal("Successfully Added!","alert alert-success")))},xhttp.open("POST","handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=add&quoteInputValue="+t+"&authorInputValue="+e+"&orderBy="+orderBy+"&ascOrDesc="+ascOrDesc)}function listBtnFunction(t){var e=(rowEl=t.target.closest("tr")).dataset.id,r=t.target.dataset.action;if("set"==r)console.log("setting today's quote...",e),xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status)if("queryError"==this.responseText)showStatusModal("Query Error!","alert alert-danger");else{getTodaysQuote();var t=document.querySelector("#list tr.table-active");t&&t.classList.remove("table-active"),rowEl.classList.add("table-active"),showStatusModal("Today's quote udpated!","alert alert-success")}},xhttp.open("POST","handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=setTodaysQuote&id="+e);else if("delete"==r){console.log("deleting...",e),xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&("queryError"==this.responseText?showStatusModal("Query Error!","alert alert-danger"):"cantDelete"==this.responseText?showStatusModal("Can't Delete Current Quote!","alert alert-danger"):(list.innerHTML=this.responseText,showStatusModal("Successfully Deleted!","alert alert-success")))},confirm("Want to delete?")?(xhttp.open("POST","handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=delete&id="+e+"&orderBy="+orderBy+"&ascOrDesc="+ascOrDesc)):console.log("Deletion is stopped!")}else if("edit"==r){console.log("editing...",e),quoteEl=rowEl.querySelector('[data-column="quote"]'),authorEl=rowEl.querySelector('[data-column="author"]'),quoteElValue=quoteEl.innerHTML,authorElValue=authorEl.innerHTML,rowEl.classList.add("editing"),quoteEl.innerHTML='<input type="text" class="form-control"  value="'+quoteElValue+'">',authorEl.innerHTML='<input type="text" class="form-control" value="'+authorElValue+'">',quoteEl.querySelector("input").focus();var a=quoteEl.querySelector("input"),o=authorEl.querySelector("input"),s=rowEl.querySelector('[data-action="cancel"'),l=rowEl.querySelector('[data-action="submit"');a.addEventListener("keyup",function(t){keyUpFunc(t,s,l)}),o.addEventListener("keyup",function(t){keyUpFunc(t,s,l)})}else if("cancel"==r)console.log("canceling...",e),quoteEl.innerHTML=quoteElValue,authorEl.innerHTML=authorElValue,rowEl.classList.remove("editing");else if("submit"==r){console.log("submiting...",e);var n=quoteEl.querySelector("input").value,u=authorEl.querySelector("input").value;""==n||""==u?showStatusModal("one ore more fields are empty!","alert alert-danger"):n==quoteElValue&&u==authorElValue?(quoteEl.innerHTML=n,authorEl.innerHTML=u,rowEl.classList.remove("editing"),showStatusModal("Nothing changed!","alert alert-warning")):(xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&("queryError"==this.responseText?showStatusModal("Query Error!","alert alert-danger"):(list.innerHTML=this.responseText,getTodaysQuote(),showStatusModal("Successfully Updated!","alert alert-success")))},xhttp.open("POST","handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=submit&orderBy="+orderBy+"&ascOrDesc="+ascOrDesc+"&quoteInputValue="+n+"&authorInputValue="+u+"&id="+e))}}function orderList(t){for(var e=orderBy,r=0;r<orderListBy.length;r++)orderListBy[r].classList.remove("active-ASC"),orderListBy[r].classList.remove("active-DESC");orderBy=t.target.dataset.orderBy,ascOrDesc=e==orderBy?"DESC"==ascOrDesc?"ASC":"DESC":"ASC",t.target.classList.add("active-"+ascOrDesc),console.log("ordering by..."+orderBy,ascOrDesc),updateList()}init();
//# sourceMappingURL=../../maps/x-quote-admin.min.js.map
