{"version":3,"sources":["timetable.js"],"names":["timetableOuter","document","getElementById","selectedDateOuter","selectedBatchOuter","orderByItems","querySelectorAll","filterStartDate","filterEndDate","selectedBatch","selectedLayout","addClassBtn","timetableResultList","timetableResultGrid_A","timetableResultGrid_B","selectedClassEl","selectedInstructorEL","selectedRoomEL","editingClassFlag","batchCode","batchTemplate","layout","orderBy","ascOrDesc","updateTimeTableList","console","log","value","querySelector","dataset","template","classesObj","batchData","classesList","classCode","innerHTML","instructorsObj","instructorsList","instructorCode","roomsObj","roomsList","roomCode","xhttp1","XMLHttpRequest","onreadystatechange","this","readyState","status","responseText","open","send","updateTimeTableGrid","xhttp2a","xhttp2b","addClass","date","startTime","endTime","xhttp3","setRequestHeader","individualClassEdit","e","stopPropagation","target","id","cancelClassId","classId","submitClassId","xhttp5","editClassId","elementEditing","elementEditingDate","elementEditingClass","elementEditingInstructor","elementEditingTime","elementEditingRoom","classList","add","starttime","endtime","class","instructor","room","deleteCalssId","xhttp4","confirm","updateLayout","remove","orderClassBy","prevOrderBy","i","length","init","selectedDate","currentDate","addEventListener"],"mappings":"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","sourcesContent":["/****************Variables****************/\n\nvar timetableOuter = document.getElementById('timetableOuter');\nvar selectedDateOuter = document.getElementById('selectedDateOuter');\nvar selectedBatchOuter = document.getElementById('selectedBatchOuter');\nvar orderByItems = document.querySelectorAll('[data-order-by]');\nvar filterStartDate = document.getElementById('filterStartDate');\nvar filterEndDate = document.getElementById('filterEndDate');\n\nvar selectedBatch = document.getElementById('selectedBatch');\nvar selectedLayout = document.getElementById('selectedLayout');\n\nvar addClassBtn = document.getElementById('addClassBtn');\n\nvar timetableResultList = document.getElementById('timetableResultList');\nvar timetableResultGrid_A = document.getElementById('timetableResultGrid_A');\nvar timetableResultGrid_B = document.getElementById('timetableResultGrid_B');\n\nvar selectedClassEl = document.getElementById('selectedClass');\nvar selectedInstructorEL = document.getElementById('selectedInstructor');\nvar selectedRoomEL = document.getElementById('selectedRoom');\n\nvar editingClassFlag = false;\nvar batchCode = null;\nvar batchTemplate = null;\nvar layout = 'list';\nvar orderBy = 'date';\nvar ascOrDesc = 'ASC';\n\n/****************Functions****************/\n\n// Update time table on change of batch\nfunction updateTimeTableList() {\n  console.log('timetable list updating...');\n\n  editingClassFlag = false;\n\n  // check which batch is selected in dropdown\n  batchCode = selectedBatch.value;\n\n  // check which batch template needs to be used\n  batchTemplate = document.querySelector(\"[value='\"+batchCode+\"']\").dataset.template;\n\n  // load classses from json, based on batch template selected\n  var classesObj = batchData[batchTemplate]['classes'];\n  var classesList = '';\n\n  for (var classCode in classesObj) {\n    classesList += '<option value=\"'+classCode+'\">'+classesObj[classCode]+'</option>';\n  }\n  selectedClassEl.innerHTML = classesList;\n\n  // load instructors from json, based on batch template selected\n  var instructorsObj = batchData[batchTemplate]['instructors'];\n  var instructorsList = '';\n\n  for (var instructorCode in instructorsObj) {\n    instructorsList += '<option value=\"'+instructorCode+'\">'+instructorsObj[instructorCode]+'</option>';\n  }\n  selectedInstructorEL.innerHTML = instructorsList;\n\n  // load rooms from json, based on batch template selected\n  var roomsObj = batchData[batchTemplate]['rooms'];\n  var roomsList = '';\n\n  for (var roomCode in roomsObj) {\n    roomsList += '<option value=\"'+roomCode+'\">'+roomsObj[roomCode]+'</option>';\n  }\n  selectedRoomEL.innerHTML = roomsList;\n\n  // load content from database\n  var xhttp1 = new XMLHttpRequest();\n  xhttp1.onreadystatechange = function() {\n    if (this.readyState == 4 && this.status == 200) {\n     timetableResultList.innerHTML = this.responseText;\n   } else {\n     // console.log(this.readyState, this.status);\n   }\n  };\n  xhttp1.open(\"GET\", \"timetable_handler.php?action=updateTimeTableList&batchCode=\"+batchCode+\"&batchTemplate=\"+batchTemplate+\"&orderBy=\"+orderBy+\"&ascOrDesc=\"+ascOrDesc, true);  // open(method, url, async)\n  xhttp1.send();\n}\n\n// Update time table on change of batch\nfunction updateTimeTableGrid() {\n  console.log('timetable grid updating...');\n  var filterStartDate = document.getElementById('filterStartDate').value;\n  var filterEndDate = document.getElementById('filterEndDate').value;\n\n  // load content from database\n  var xhttp2a = new XMLHttpRequest();\n  xhttp2a.onreadystatechange = function() {\n    if (this.readyState == 4 && this.status == 200) {\n     timetableResultGrid_A.innerHTML = this.responseText;\n     // \n     // // for(let r = 0; r < timetableResultGrid_A.querySelectorAll('tr').length; r++) {\n     // for(let r = 0; r < 1; r++) {\n     //   // for(let c = 1; c < timetableResultGrid_A.querySelectorAll('tr')[r].querySelectorAll('td').length; c++) {\n     //   for(let c = 1; c < 2; c++) {\n     //     let col = timetableResultGrid_A.querySelectorAll('tr')[0].querySelectorAll('td')[c];\n     //     console.log(col);\n     //   }\n     // }\n\n   } else {\n     // console.log(this.readyState, this.status);\n   }\n  };\n  xhttp2a.open(\"GET\", \"timetable_handler.php?action=updateTimeTableGrid_A&filterStartDate=\"+filterStartDate+\"&filterEndDate=\"+filterEndDate, true);  // open(method, url, async)\n  xhttp2a.send();\n\n  // load content from database\n  var xhttp2b = new XMLHttpRequest();\n  xhttp2b.onreadystatechange = function() {\n    if (this.readyState == 4 && this.status == 200) {\n     timetableResultGrid_B.innerHTML = this.responseText;\n   } else {\n     // console.log(this.readyState, this.status);\n   }\n  };\n  xhttp2b.open(\"GET\", \"timetable_handler.php?action=updateTimeTableGrid_B&filterStartDate=\"+filterStartDate+\"&filterEndDate=\"+filterEndDate, true);  // open(method, url, async)\n  xhttp2b.send();\n}\n\n// Add class on Submit btn click\nfunction addClass() {\n  if(!editingClassFlag) {\n    console.log('adding');\n\n    var date = document.getElementById('selectedDate').value;\n    var classCode = document.getElementById('selectedClass').value;\n    var instructorCode = document.getElementById('selectedInstructor').value;\n    var startTime = document.getElementById('selectedStartTime').value;\n    var endTime = document.getElementById('selectedEndTime').value;\n    var roomCode = document.getElementById('selectedRoom').value;\n    // console.log(batchCode, batchTemplate, date, classCode, instructorCode, startTime, endTime, roomCode);\n\n    var xhttp3 = new XMLHttpRequest();\n    xhttp3.onreadystatechange = function() {\n      if (this.readyState == 4 && this.status == 200) {\n        timetableResultList.innerHTML = this.responseText;\n      }\n    };\n    xhttp3.open(\"POST\", \"timetable_handler.php\", true);  // open(method, url, async)\n    xhttp3.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhttp3.send(\"action=addClass&batchCode=\"+batchCode+\"&batchTemplate=\"+batchTemplate+\"&orderBy=\"+orderBy+\"&ascOrDesc=\"+ascOrDesc+\"&date=\"+date+\"&classCode=\"+classCode+\"&instructorCode=\"+instructorCode+\"&startTime=\"+startTime+\"&endTime=\"+endTime+\"&roomCode=\"+roomCode);\n  }\n}\n\n// Edit -> Delete -> Cancel -> Submit class fuctions\nfunction individualClassEdit(e) {\n  e.stopPropagation();\n  // delete class -> only if not editing any class\n  if(e.target.id == 'deleteClass' && !editingClassFlag) {\n    var deleteCalssId = e.target.dataset.classId;\n    console.log('deleting: ' + deleteCalssId);\n\n    var xhttp4 = new XMLHttpRequest();\n    xhttp4.onreadystatechange = function() {\n      if (this.readyState == 4 && this.status == 200) {\n       timetableResultList.innerHTML = this.responseText;\n      }\n    };\n\n    var deleteConfirmation = confirm(\"Want to delete?\");\n    if (deleteConfirmation) {\n        //Logic to delete the item\n        xhttp4.open(\"POST\", \"timetable_handler.php\", true);  // open(method, url, async)\n        xhttp4.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n        xhttp4.send(\"action=deleteClass&batchCode=\"+batchCode+\"&batchTemplate=\"+batchTemplate+\"&orderBy=\"+orderBy+\"&ascOrDesc=\"+ascOrDesc+\"&deleteId=\"+deleteCalssId);\n    } else {\n      console.log('Deletion is stopped!');\n    }\n  }\n  // edit class -> only if not editing any class\n  else if(e.target.id == 'editClass' && !editingClassFlag) {\n    var editClassId = e.target.dataset.classId;\n    console.log('editing: ' + editClassId);\n\n    editingClassFlag = true;\n\n    var elementEditing = document.getElementById('editClass_'+editClassId);\n    var elementEditingDate = elementEditing.querySelector('.edit-date');\n    var elementEditingClass = elementEditing.querySelector('.edit-class');\n    var elementEditingInstructor = elementEditing.querySelector('.edit-instructor');\n    var elementEditingTime = elementEditing.querySelector('.edit-time');\n    var elementEditingRoom = elementEditing.querySelector('.edit-room');\n\n    elementEditing.classList.add('editing-class');\n    elementEditingDate.innerHTML = '<input type=\"date\" class=\"form-control\" id=\"editingDate\" value=\"'+elementEditingDate.dataset.date+'\">';\n    elementEditingTime.classList.add('time-picker');\n    elementEditingTime.innerHTML = '<input type=\"time\" class=\"form-control\" id=\"editingStartTime\" value=\"'+elementEditingTime.dataset.starttime+'\"><input type=\"time\" class=\"form-control\" id=\"editingEndTime\" value=\"'+elementEditingTime.dataset.endtime+'\">';\n\n    // load classses from json, based on batch template selected\n    var classesObj = batchData[batchTemplate]['classes'];\n    var classesList = '';\n    for (var classCode in classesObj) {\n      if(classCode == elementEditingClass.dataset.class) {\n        classesList += '<option value=\"'+classCode+'\" selected>'+classesObj[classCode]+'</option>';\n      } else {\n        classesList += '<option value=\"'+classCode+'\">'+classesObj[classCode]+'</option>';\n      }\n    }\n    elementEditingClass.innerHTML = '<select class=\"custom-select\" id=\"editingClass\">'+classesList+'</select>';;\n\n    // load instructors from json, based on batch template selected\n    var instructorsObj = batchData[batchTemplate]['instructors'];\n    var instructorsList = '';\n\n    for (var instructorCode in instructorsObj) {\n      if(instructorCode == elementEditingInstructor.dataset.instructor) {\n        instructorsList += '<option value=\"'+instructorCode+'\" selected>'+instructorsObj[instructorCode]+'</option>';\n      } else {\n        instructorsList += '<option value=\"'+instructorCode+'\">'+instructorsObj[instructorCode]+'</option>';\n      }\n    }\n    elementEditingInstructor.innerHTML = '<select class=\"custom-select\" id=\"editingInstructors\">'+instructorsList+'</select>';;\n\n    // load rooms from json, based on batch template selected\n    var roomsObj = batchData[batchTemplate]['rooms'];\n    var roomsList = '';\n\n    for (var roomCode in roomsObj) {\n      if(roomCode == elementEditingRoom.dataset.room) {\n        roomsList += '<option value=\"'+roomCode+'\" selected>'+roomsObj[roomCode]+'</option>';\n      } else {\n        roomsList += '<option value=\"'+roomCode+'\">'+roomsObj[roomCode]+'</option>';\n      }\n    }\n    elementEditingRoom.innerHTML = '<select class=\"custom-select\" id=\"editingRoom\">'+roomsList+'</select>';\n  }\n  // cancel class -> if editing any class\n  else if(e.target.id == 'cancelClass' && editingClassFlag) {\n    var cancelClassId = e.target.dataset.classId;\n    console.log('cancelling: ' + cancelClassId);\n\n    updateTimeTableList();\n  }\n  // submit class -> if editing any class\n  else if(e.target.id == 'submitClass' && editingClassFlag) {\n    var submitClassId = e.target.dataset.classId;\n    console.log('submitting: ' + submitClassId);\n\n    var date = document.getElementById('editingDate').value;\n    var classCode = document.getElementById('editingClass').value;\n    var instructorCode = document.getElementById('editingInstructors').value;\n    var startTime = document.getElementById('editingStartTime').value;\n    var endTime = document.getElementById('editingEndTime').value;\n    var roomCode = document.getElementById('editingRoom').value;\n    // console.log(batchCode, batchTemplate, date, classCode, instructorCode, startTime, endTime, roomCode);\n\n    var xhttp5 = new XMLHttpRequest();\n    xhttp5.onreadystatechange = function() {\n      if (this.readyState == 4 && this.status == 200) {\n        timetableResultList.innerHTML = this.responseText;\n        editingClassFlag = false;\n      }\n    };\n    xhttp5.open(\"POST\", \"timetable_handler.php\", true);  // open(method, url, async)\n    xhttp5.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n    xhttp5.send(\"action=submitClass&batchCode=\"+batchCode+\"&batchTemplate=\"+batchTemplate+\"&orderBy=\"+orderBy+\n    \"&ascOrDesc=\"+ascOrDesc+\"&date=\"+date+\"&classCode=\"+classCode+\"&instructorCode=\"+instructorCode+\n    \"&startTime=\"+startTime+\"&endTime=\"+endTime+\"&roomCode=\"+roomCode+\"&submitId=\"+submitClassId);\n\n    // updateTimeTableList();\n  }\n}\n\n// Update layout on change of list or grid\nfunction updateLayout(e) {\n  if(e.target) {\n    layout = e.target.value;\n  } else {\n    layout = selectedLayout.value;\n  }\n  if(layout == 'list') {\n    timetableOuter.classList.add('list');\n    timetableOuter.classList.remove('grid');\n  } else {\n    timetableOuter.classList.add('grid');\n    timetableOuter.classList.remove('list');\n  }\n}\n\n// function to order tables on click\nfunction orderClassBy(e) {\n  var prevOrderBy = orderBy;\n\n  // remove active class from all columns\n  for(var i = 0; i < orderByItems.length; i++) {\n    orderByItems[i].classList.remove('active-ASC');\n    orderByItems[i].classList.remove('active-DESC');\n  }\n\n  orderBy = e.target.dataset.orderBy;\n\n  // toggle ASC | DESC if column clicked is same as previous click\n  if(prevOrderBy == orderBy) {\n    if(ascOrDesc == 'DESC') {\n      ascOrDesc = 'ASC';\n    } else {\n      ascOrDesc = 'DESC';\n    }\n    // make ASC if column clicked is different from previous click\n  } else {\n    ascOrDesc = 'ASC';\n  }\n\n  // add active class to clicked column\n  e.target.classList.add('active-'+ascOrDesc);\n\n  console.log('ordering by...' + orderBy, ascOrDesc);\n\n  updateTimeTableList();\n}\n\n// run on page laod\nfunction init() {\n  selectedDate.value = currentDate();\n  // filterStartDate.value = currentDate();\n  filterStartDate.value = \"2018-03-05\";\n  filterEndDate.value = \"2018-03-25\";\n  updateTimeTableList(selectedBatch);\n  updateTimeTableGrid();\n  updateLayout(selectedLayout);\n};\ninit();\n\n/****************Events****************/\n\nselectedBatch.addEventListener('change', updateTimeTableList, false);\nfilterStartDate.addEventListener('change', updateTimeTableGrid, false);\nfilterEndDate.addEventListener('change', updateTimeTableGrid, false);\nselectedLayout.addEventListener('change', updateLayout, false);\naddClassBtn.addEventListener('click', addClass, false);\ntimetableResultList.addEventListener('click', individualClassEdit, false);\nfor(var i = 0; i < orderByItems.length; i++) {\n  orderByItems[i].addEventListener('click', orderClassBy, false);\n}\n"],"file":"timetable.min.js"}