var categoryParent,categoryCode,categoryName,categoryCodeValue,categoryNameValue,xhttp=null,isEditing=!1;function individualOperations(e){if(e.stopPropagation(),"deleteBtn"!=e.target.id||isEditing)if("editBtn"!=e.target.id||isEditing){if("cancelBtn"==e.target.id&&isEditing){isEditing=!1;var t=e.target.dataset.id;console.log("cancelling: "+t),categoryParent.classList.remove("editing-class"),categoryCode.innerHTML=categoryCodeValue,categoryName.innerHTML=categoryNameValue}else if("submitBtn"==e.target.id&&isEditing){isEditing=!1;var a=e.target.dataset.id;console.log("submitting: "+a);var n=document.getElementById("newCode").value,i=document.getElementById("newName").value;(xhttp=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(categoriesListContainer.innerHTML=this.responseText)},xhttp.open("POST","categories_handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=submit&newCode="+n+"&newName="+i+"&submitId="+a)}}else{isEditing=!0;var o=e.target.dataset.id;console.log("editing: "+o),categoryParent=e.target.parentNode.parentNode,categoryCode=categoryParent.querySelector(".category-code"),categoryName=categoryParent.querySelector(".category-name"),categoryCodeValue=categoryCode.innerHTML,categoryNameValue=categoryName.innerHTML,categoryParent.classList.add("editing-class"),categoryCode.innerHTML='<input type="text" class="form-control" id="newCode" value="'+categoryCodeValue+'">',categoryName.innerHTML='<input type="text" class="form-control" id="newName" value="'+categoryNameValue+'">'}else{var r=e.target.dataset.id;console.log("deleting: "+r),(xhttp=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(categoriesListContainer.innerHTML=this.responseText)},confirm("Want to delete?")?(xhttp.open("POST","categories_handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=delete&deleteId="+r)):console.log("Deletion is stopped!")}}function fetchCategories(){console.log("fetching categories list..."),(xhttp=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&200==this.status&&(categoriesListContainer.innerHTML=this.responseText)},xhttp.open("GET","categories_handler.php?action=fetchCategories",!0),xhttp.send(),xhttp=null}function init(){fetchCategories()}init(),categoriesListContainer.addEventListener("click",individualOperations,!1);
//# sourceMappingURL=categories.min.js.map
