var userParent,bookTitle,bookStock,bookCategory,bookTitleValue,bookAuthorValue,bookStockValue,bookCategoryValue,usersListContainer=document.getElementById("usersListContainer"),addBtn=document.getElementById("addBtn");function individualOperations(e){if(e.stopPropagation(),"deleteBtn"!=e.target.id||isEditing)if("editBtn"!=e.target.id||isEditing){if("cancelBtn"==e.target.id&&isEditing){isEditing=!1;u=(userParent=e.target.parentNode.parentNode).dataset.userId;console.log("cancelling: "+u),userParent.classList.remove("editing-outer"),userUsername.innerHTML=userUsernameValue,userFullname.innerHTML=userFullnameValue,userEmail.innerHTML=userEmailValue,userImage.innerHTML=userImageValue,userAccessType.innerHTML=userAccessTypeValue}else if("updateBtn"==e.target.id&&isEditing){isEditing=!1;u=(userParent=e.target.parentNode.parentNode).dataset.userId;console.log("updating: "+u);var t=userUsername.querySelector("input").value,n=userFullname.querySelector("input").value,s=userEmail.querySelector("input").value,a=userImage.querySelector("input").value,r=userAccessType.querySelector("select").value;xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(usersListContainer.innerHTML=this.responseText)},xhttp.open("POST","users_handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=update&newUsername="+t+"&newFullname="+n+"&newEmail="+s+"&newImage="+a+"&newAccessType="+r+"&userId="+u)}}else{isEditing=!0;var u=(userParent=e.target.parentNode.parentNode).dataset.userId,l=userParent.dataset.userAccessType;console.log("editing: "+u),userUsername=userParent.querySelector(".user-username"),userFullname=userParent.querySelector(".user-fullname"),userEmail=userParent.querySelector(".user-email"),userImage=userParent.querySelector(".user-image"),userAccessType=userParent.querySelector(".user-access-type"),userUsernameValue=userUsername.innerHTML,userFullnameValue=userFullname.innerHTML,userEmailValue=userEmail.innerHTML,userImageValue=userImage.innerHTML,userAccessTypeValue=userAccessType.innerHTML,userParent.classList.add("editing-outer"),userUsername.innerHTML='<input type="text" class="form-control" value="'+userUsernameValue+'">',userFullname.innerHTML='<input type="text" class="form-control" value="'+userFullnameValue+'">',userEmail.innerHTML='<input type="email" class="form-control" value="'+userEmailValue+'">',userImage.innerHTML='<input type="file" class="form-control" value="'+userImageValue+'">',userAccessType.innerHTML='\n      <select class="custom-select">\n        <option value="admin">Admin</option>\n        <option value="user">User</option>\n      </select>\n    ',userAccessType.querySelector("select").value=l}else{var u=(userParent=e.target.parentNode.parentNode).dataset.userId;console.log("deleting: "+u),xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(usersListContainer.innerHTML=this.responseText)},confirm("Want to delete?")?(xhttp.open("POST","users_handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=delete&userId="+u)):console.log("Deletion is stopped!")}}function fetchUsers(){console.log("fetching users list..."),xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(usersListContainer.innerHTML=this.responseText)},xhttp.open("GET","users_handler.php?action=fetchUsers",!0),xhttp.send()}function addUser(){if(!isEditing){console.log("adding book..");var e=document.getElementById("addUsername").value,t=document.getElementById("addFullName").value,n=document.getElementById("addEmail").value,s=document.getElementById("addImage").value,a=document.getElementById("selectUserType").value;document.getElementById("addUsername").value="",document.getElementById("addFullName").value="",document.getElementById("addEmail").value="",document.getElementById("addImage").value="",document.getElementById("selectUserType").value="user",xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(usersListContainer.innerHTML=this.responseText)},xhttp.open("POST","users_handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=add&addUsername="+e+"&addFullName="+t+"&addEmail="+n+"&addImage="+s+"&selectUserType="+a)}}function init(){fetchUsers()}init(),usersListContainer.addEventListener("click",individualOperations,!1),addBtn.addEventListener("click",addUser,!1);
//# sourceMappingURL=users.min.js.map
