var categoryParent,categoryCode,categoryName,categoryCodeValue,categoryNameValue,booksListContainer=document.getElementById("booksListContainer"),addBtn=document.getElementById("addBtn");function individualOperations(e){if(e.stopPropagation(),"deleteBtn"!=e.target.id||isEditing)if("editBtn"!=e.target.id||isEditing){if("cancelBtn"==e.target.id&&isEditing){isEditing=!1;var t=e.target.dataset.id;console.log("cancelling: "+t),categoryParent.classList.remove("editing-outer"),categoryCode.innerHTML=categoryCodeValue,categoryName.innerHTML=categoryNameValue}else if("updateBtn"==e.target.id&&isEditing){isEditing=!1;var o=e.target.dataset.id;console.log("updating: "+o);var n=document.getElementById("newCode").value,a=document.getElementById("newName").value;xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(booksListContainer.innerHTML=this.responseText)},xhttp.open("POST","books_handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=update&newCode="+n+"&newName="+a+"&updateId="+o)}}else{isEditing=!0;var i=e.target.parentNode.parentNode.dataset.id;console.log("editing: "+i),bookParent=e.target.parentNode.parentNode,bookTitle=bookParent.querySelector(".book-title"),bookAuthor=bookParent.querySelector(".book-author"),bookStock=bookParent.querySelector(".book-stock"),bookTitleValue=bookTitle.innerHTML,bookAuthorValue=bookAuthor.innerHTML,bookStockValue=bookAuthor.innerHTML,bookParent.classList.add("editing-outer"),bookTitle.innerHTML='<input type="text" class="form-control" id="newTitle" value="'+bookTitleValue+'">',bookAuthor.innerHTML='<input type="text" class="form-control" id="newAuthor" value="'+bookAuthorValue+'">',bookStock.innerHTML='<input type="number" class="form-control" id="newStock" value="'+bookStockValue+'">'}else{var d=e.target.parentNode.parentNode.dataset.id;console.log("deleting: "+d),xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(booksListContainer.innerHTML=this.responseText)},confirm("Want to delete?")?(xhttp.open("POST","books_handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=delete&deleteId="+d)):console.log("Deletion is stopped!")}}function fetchBooks(){console.log("fetching books list..."),xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(booksListContainer.innerHTML=this.responseText)},xhttp.open("GET","books_handler.php?action=fetchBooks",!0),xhttp.send()}function addBook(){if(!isEditing){console.log("adding category..");var e=document.getElementById("addCode").value,t=document.getElementById("addName").value;document.getElementById("addCode").value="",document.getElementById("addName").value="",xhttp=new XMLHttpRequest,xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(booksListContainer.innerHTML=this.responseText)},xhttp.open("POST","books_handler.php",!0),xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhttp.send("action=add&addCode="+e+"&addName="+t)}}function init(){fetchBooks()}init(),booksListContainer.addEventListener("click",individualOperations,!1),addBtn.addEventListener("click",addBook,!1);
//# sourceMappingURL=books.min.js.map
